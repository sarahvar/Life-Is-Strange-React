import{r as t,d as w,j as e}from"./index-Kc4CJH8f.js";import{a as L}from"./axios-CCb-kr4I.js";function y(){const[a,x]=t.useState(""),[r,f]=t.useState(""),[i,l]=t.useState(!1),[d,n]=t.useState(""),j=w(),v=async s=>{var u,g,p,m;s.preventDefault(),l(!0),n("");const c="/api/login";console.log("Attempting login with:",{email:a,password:r}),console.log(`API request URL: ${window.location.origin}${c}`);try{const h=(await L.post(c,{email:a,password:r})).data.token;h?(localStorage.setItem("token",h),console.log("Login successful. Token stored in localStorage."),j("/create")):n("Authentication failed: No token provided")}catch(o){console.log("Login failed:",((g=(u=o.response)==null?void 0:u.data)==null?void 0:g.message)||o),n(((m=(p=o.response)==null?void 0:p.data)==null?void 0:m.message)||"An error occurred")}finally{l(!1)}};return e.jsxs("div",{children:[e.jsx("h1",{children:"Login"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:a,onChange:s=>x(s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:r,onChange:s=>f(s.target.value),required:!0})]}),e.jsx("button",{type:"submit",disabled:i,children:i?"Loading...":"Login"}),d&&e.jsx("p",{style:{color:"red"},children:d})]})]})}export{y as default};
