import{j as e,u as R,a as I,r as w,s as S,b as f,c as Q}from"./index-Cmqdr8qm.js";const M=({questions:s,onSubmit:r,responses:a,handleResponseChange:d})=>e.jsxs("div",{className:"quiz-container",children:[e.jsx("h1",{children:"Quiz Interactif"}),e.jsxs("form",{onSubmit:l=>{l.preventDefault(),r()},children:[s.map((l,n)=>e.jsxs("div",{className:"question",children:[e.jsx("h3",{children:`Question ${n+1}: ${l.question}`}),e.jsx("ul",{className:"answers",children:l.answers.map((u,i)=>e.jsx("li",{children:e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:`question-${n}`,value:i,checked:a[n]===i,onChange:()=>d(n,i)}),u]})},i))})]},n)),e.jsx("div",{className:"buttons",children:e.jsx("button",{type:"submit",children:"Soumettre"})})]})]}),N=({results:s,correctAnswers:r,totalQuestions:a,questions:d,onReset:l})=>e.jsxs("div",{className:"result-container",children:[e.jsx("h1",{children:"Résultats"}),e.jsxs("p",{children:["Vous avez obtenu ",r," sur ",a," bonnes réponses."]}),e.jsx("ul",{className:"result-list",children:d.map((n,u)=>{const i=s[u]||{};return e.jsxs("li",{className:i.correct?"correct-answer-item":"incorrect-answer",children:[e.jsxs("h4",{children:["Question ",u+1,": ",n.question]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Réponse sélectionnée:"})," ",i.selected]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Réponse correcte:"})," ",e.jsx("span",{className:"correct-answer",children:i.correct_answer})]})]},u)})}),e.jsx("div",{className:"buttons",children:e.jsx("button",{type:"button",onClick:l,children:"Réinitialiser"})})]}),j=s=>{for(let r=s.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[s[r],s[a]]=[s[a],s[r]]}return s},h=[{question:"Quel est le nom complet de Max ?",answers:["Maxine Caulfield","Max Caulfield","Maxine Carter","Max Carter"],correct:0},{question:"Quel est le super pouvoir de Max ?",answers:["Télékinésie","Voyage dans le temps","Télépathie","Invisibilité"],correct:1},{question:"Quel est le nom de l'amie d'enfance de Max ?",answers:["Rachel Amber","Victoria Chase","Kate Marsh","Chloé Price"],correct:3},{question:"Quel est le nom de l'école que Max fréquente ?",answers:["Arcadia Bay School","Pacific Northwest School","Blackwell Academy","West Coast Academy"],correct:2},{question:"Comment s'appelle la ville où se déroule l'histoire ?",answers:["Arcadia Bay","Bright Falls","Twin Peaks","Silent Hill"],correct:0},{question:"Quelle est la passion artistique de Max ?",answers:["Peinture","Photographie","Écriture","Musique"],correct:1},{question:"Quelle est la principale cause des conflits entre Max et Chloé ?",answers:["Le déménagement de Max","Les secrets de Chloé","La disparition de Rachel","Les relations amoureuses"],correct:0},{question:" Pourquoi Max retourne-t-elle à Arcadia Bay après plusieurs années d'absence ?",answers:["Pour renouer avec sa meilleure amie Chloé","Pour un projet de photographie","Pour suivre des cours à la Blackwell Academy","Pour résoudre un mystère local"],correct:2},{question:"Quel est le nom de la mère de Max ?",answers:["Joyce","Diana","Sarah","Vanessa"],correct:3},{question:"Qui est le beau-père de Chloé ?",answers:["Proviseur Wells","Mark Jefferson","David Madsen","Sean Prescott"],correct:2}],A=()=>{const s=R(),r=I(t=>t.quiz),[a,d]=w.useState(()=>{const t=sessionStorage.getItem("questionsOrder");if(t)return JSON.parse(t);{const c=j([...h]);return sessionStorage.setItem("questionsOrder",JSON.stringify(c)),c}}),[l,n]=w.useState(!1);w.useEffect(()=>{const t=sessionStorage.getItem("quizResponses"),c=sessionStorage.getItem("quizResults"),o=sessionStorage.getItem("correctAnswers"),x=sessionStorage.getItem("showResults")==="true";t&&s(S(JSON.parse(t))),c&&o&&(s(f(JSON.parse(c),parseInt(o))),n(x))},[s]);const u=(t,c)=>{const o={...r.responses,[t]:c};s(S(o)),sessionStorage.setItem("quizResponses",JSON.stringify(o))},i=()=>{let t=0;const c=a.map((o,x)=>{const m=r.responses[x],g=h.findIndex(q=>q.question===o.question),p=g!==-1?h[g].correct:-1;return m===p?(t++,{correct:!0,selected:o.answers[m],correct_answer:o.answers[p]}):{correct:!1,selected:m!==void 0?o.answers[m]:"Aucune réponse",correct_answer:p!==-1?o.answers[p]:"Inconnu"}});s(f(c,t)),sessionStorage.setItem("quizResults",JSON.stringify(c)),sessionStorage.setItem("correctAnswers",t),sessionStorage.setItem("showResults","true"),n(!0)},v=()=>{s(Q()),sessionStorage.removeItem("quizResponses"),sessionStorage.removeItem("quizResults"),sessionStorage.removeItem("correctAnswers"),sessionStorage.removeItem("showResults");const t=j([...h]);d(t),sessionStorage.setItem("questionsOrder",JSON.stringify(t)),n(!1)};return e.jsxs("div",{children:[e.jsx("div",{className:"info-message",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Info :"})," Sur certains navigateurs (comme Brave, Safari et Internet Explorer), placez votre curseur sur le texte, pas sur le rond, pour sélectionner votre réponse."]})}),l?e.jsx(N,{results:r.results,correctAnswers:r.correctAnswers,totalQuestions:h.length,questions:a,onReset:v}):e.jsx(M,{questions:a,onSubmit:i,responses:r.responses,handleResponseChange:u})]})};export{A as default};
